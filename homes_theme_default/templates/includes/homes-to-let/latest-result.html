{% load static %}
{% load thumbnail %}
{% load humanize %}

<article class="article--property-latest">
    {% with property.lettingpicture_set.all|first as picture %}
        <div class="article--property-latest__image">
            {% thumbnail picture.attachment "255x171" crop="center" as im %}
                <a href="{% url 'lettings:detail' property.slug %}" title="{{ property.title }}"><img class="d-block img-fluid" src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}" alt="{{picture.caption}}" title="{{picture.caption}}"></a>
            {% empty %}
                <a href="{% url 'lettings:detail' property.slug %}" title="{{ property.title }}"><img class="d-block img-fluid" src="{% static 'build/img/awaiting.png' %}"></a>
            {% endthumbnail %}
        </div>
    {% endwith %}
    <header class="article--property-latest__header">
        <h2 class="article--property-latest__title"><a href="{% url 'lettings:detail' property.slug %}">{{ property.title }}</a></h2>
        <h3 class="article--property-latest__address">{{ property.display_address }}</h3>
        <h4 class="article--property-latest__price">&#163;{{property.rental|floatformat|intcomma}} {{property.get_period_display}}</h4>
    </header>
    <div class="article--featured-property__content">
        <p>{{ property.summary|truncatewords:16 }}</p>
    </div>
</article>